<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.piscicultura.monitoreo.controller.EstanqueDetalleController"
      spacing="12" style="-fx-padding:16; -fx-background-color: #fafafa;">

    <!-- Header -->
    <HBox spacing="8" alignment="CENTER_LEFT">
        <Label fx:id="lblTitulo" style="-fx-font-size:18px; -fx-font-weight:bold;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="Actualizar" onAction="#onRefrescar"/>
    </HBox>

    <!-- Tarjeta: Semáforo de calidad (chips) -->
    <VBox spacing="12" style="
        -fx-background-color: linear-gradient(to bottom, #ffffff, #fbfbfb);
        -fx-background-radius: 12;
        -fx-border-color: #e6e8ec;
        -fx-border-radius: 12;
        -fx-border-width: 1;
        -fx-padding: 12;
        -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 12, 0.15, 0, 2);
    ">
        <Label text="Semáforo de calidad" style="-fx-font-size:14px; -fx-font-weight:700; -fx-text-fill:#2c3e50;"/>

        <!-- Grid 2x2 de chips -->
        <GridPane hgap="10" vgap="10">
            <columnConstraints>
                <ColumnConstraints hgrow="ALWAYS"/>
                <ColumnConstraints hgrow="ALWAYS"/>
            </columnConstraints>

            <!-- CHIP Temperatura -->
            <HBox GridPane.rowIndex="0" GridPane.columnIndex="0" spacing="10" alignment="CENTER_LEFT" style="
                 -fx-background-color: #f7f8fa;
                 -fx-background-radius: 999;
                 -fx-border-color: #e6e8ec;
                 -fx-border-width: 1;
                 -fx-border-radius: 999;
                 -fx-padding: 8 12;">
                <!-- Píldora de color -->
                <Region fx:id="dotTemp" style="
                    -fx-min-width: 10; -fx-min-height: 10;
                    -fx-max-width: 10; -fx-max-height: 10;
                    -fx-background-radius: 50%;
                    -fx-background-color: #12b886;"/>
                <!-- Nombre + Valor -->
                <HBox spacing="6" alignment="CENTER_LEFT">
                    <Label text="Temperatura" style="-fx-text-fill:#334155; -fx-font-weight:600;"/>
                    <Region style="-fx-background-color:#e6e8ec; -fx-min-width:1; -fx-max-width:1; -fx-min-height:16; -fx-max-height:16;"/>
                    <HBox spacing="0" alignment="CENTER_LEFT">
                        <Label fx:id="lblTemp" style="-fx-text-fill:#475569; -fx-font-weight:700;"/>
                        <Label text=" °C" style="-fx-text-fill:#6b7280;"/>
                    </HBox>
                </HBox>
                <!-- separador interno -->
                <Region style="-fx-background-color:#e6e8ec; -fx-min-width:1; -fx-max-width:1; -fx-min-height:16; -fx-max-height:16;"/>
                <!-- Estado -->
                <HBox spacing="6" alignment="CENTER_LEFT">
                    <Label fx:id="icoTemp" text="✓"/>
                    <Label fx:id="semTemp" text="Óptimo" style="-fx-text-fill:#334155; -fx-font-weight:700;"/>
                </HBox>
            </HBox>

            <!-- CHIP pH -->
            <HBox GridPane.rowIndex="0" GridPane.columnIndex="1" spacing="10" alignment="CENTER_LEFT" style="
                 -fx-background-color: #f7f8fa;
                 -fx-background-radius: 999;
                 -fx-border-color: #e6e8ec;
                 -fx-border-width: 1;
                 -fx-border-radius: 999;
                 -fx-padding: 8 12;">
                <Region fx:id="dotPh" style="
                    -fx-min-width: 10; -fx-min-height: 10;
                    -fx-max-width: 10; -fx-max-height: 10;
                    -fx-background-radius: 50%;
                    -fx-background-color: #12b886;"/>
                <HBox spacing="6" alignment="CENTER_LEFT">
                    <Label text="pH" style="-fx-text-fill:#334155; -fx-font-weight:600;"/>
                    <Region style="-fx-background-color:#e6e8ec; -fx-min-width:1; -fx-max-width:1; -fx-min-height:16; -fx-max-height:16;"/>
                    <HBox spacing="0" alignment="CENTER_LEFT">
                        <Label fx:id="lblPh" style="-fx-text-fill:#475569; -fx-font-weight:700;"/>
                    </HBox>
                </HBox>
                <Region style="-fx-background-color:#e6e8ec; -fx-min-width:1; -fx-max-width:1; -fx-min-height:16; -fx-max-height:16;"/>
                <HBox spacing="6" alignment="CENTER_LEFT">
                    <Label fx:id="icoPh" text="✓"/>
                    <Label fx:id="semPh" text="Óptimo" style="-fx-text-fill:#334155; -fx-font-weight:700;"/>
                </HBox>
            </HBox>

            <!-- CHIP Oxígeno -->
            <HBox GridPane.rowIndex="1" GridPane.columnIndex="0" spacing="10" alignment="CENTER_LEFT" style="
                 -fx-background-color: #f7f8fa;
                 -fx-background-radius: 999;
                 -fx-border-color: #e6e8ec;
                 -fx-border-width: 1;
                 -fx-border-radius: 999;
                 -fx-padding: 8 12;">
                <Region fx:id="dotOx" style="
                    -fx-min-width: 10; -fx-min-height: 10;
                    -fx-max-width: 10; -fx-max-height: 10;
                    -fx-background-radius: 50%;
                    -fx-background-color: #12b886;"/>
                <HBox spacing="6" alignment="CENTER_LEFT">
                    <Label text="Oxígeno" style="-fx-text-fill:#334155; -fx-font-weight:600;"/>
                    <Region style="-fx-background-color:#e6e8ec; -fx-min-width:1; -fx-max-width:1; -fx-min-height:16; -fx-max-height:16;"/>
                    <HBox spacing="0" alignment="CENTER_LEFT">
                        <Label fx:id="lblOx" style="-fx-text-fill:#475569; -fx-font-weight:700;"/>
                        <Label text=" mg/L" style="-fx-text-fill:#6b7280;"/>
                    </HBox>
                </HBox>
                <Region style="-fx-background-color:#e6e8ec; -fx-min-width:1; -fx-max-width:1; -fx-min-height:16; -fx-max-height:16;"/>
                <HBox spacing="6" alignment="CENTER_LEFT">
                    <Label fx:id="icoOx" text="✓"/>
                    <Label fx:id="semOx" text="Óptimo" style="-fx-text-fill:#334155; -fx-font-weight:700;"/>
                </HBox>
            </HBox>

            <!-- CHIP Amoniaco -->
            <HBox GridPane.rowIndex="1" GridPane.columnIndex="1" spacing="10" alignment="CENTER_LEFT" style="
                 -fx-background-color: #f7f8fa;
                 -fx-background-radius: 999;
                 -fx-border-color: #e6e8ec;
                 -fx-border-width: 1;
                 -fx-border-radius: 999;
                 -fx-padding: 8 12;">
                <Region fx:id="dotNh3" style="
                    -fx-min-width: 10; -fx-min-height: 10;
                    -fx-max-width: 10; -fx-max-height: 10;
                    -fx-background-radius: 50%;
                    -fx-background-color: #12b886;"/>
                <HBox spacing="6" alignment="CENTER_LEFT">
                    <Label text="Amoniaco" style="-fx-text-fill:#334155; -fx-font-weight:600;"/>
                    <Region style="-fx-background-color:#e6e8ec; -fx-min-width:1; -fx-max-width:1; -fx-min-height:16; -fx-max-height:16;"/>
                    <HBox spacing="0" alignment="CENTER_LEFT">
                        <Label fx:id="lblNh3" style="-fx-text-fill:#475569; -fx-font-weight:700;"/>
                        <Label text=" mg/L" style="-fx-text-fill:#6b7280;"/>
                    </HBox>
                </HBox>
                <Region style="-fx-background-color:#e6e8ec; -fx-min-width:1; -fx-max-width:1; -fx-min-height:16; -fx-max-height:16;"/>
                <HBox spacing="6" alignment="CENTER_LEFT">
                    <Label fx:id="icoNh3" text="✓"/>
                    <Label fx:id="semNh3" text="Óptimo" style="-fx-text-fill:#334155; -fx-font-weight:700;"/>
                </HBox>
            </HBox>
        </GridPane>

        <!-- Capacidad (dato auxiliar fuera de chips) -->
        <HBox spacing="8" alignment="CENTER_LEFT">
            <Label text="Capacidad (m³):" style="-fx-text-fill:#334155; -fx-font-weight:600;"/>
            <Label fx:id="lblCap" style="-fx-text-fill:#475569; -fx-font-weight:700;"/>
        </HBox>
    </VBox>

    <!-- BARCHART valores actuales -->
    <TitledPane text="Valores actuales" expanded="true">
        <content>
            <BarChart fx:id="barActuales" animated="false">
                <xAxis>
                    <CategoryAxis label="Variable"/>
                </xAxis>
                <yAxis>
                    <NumberAxis label="Valor"/>
                </yAxis>
            </BarChart>
        </content>
    </TitledPane>

    <!-- LINECHART histórico -->
    <TitledPane text="Histórico (si hay datos en 'medicion')" expanded="false">
        <content>
            <LineChart fx:id="lineHistorico" animated="false">
                <xAxis>
                    <CategoryAxis label="Fecha/Hora"/>
                </xAxis>
                <yAxis>
                    <NumberAxis label="Valor"/>
                </yAxis>
            </LineChart>
        </content>
    </TitledPane>

</VBox>
